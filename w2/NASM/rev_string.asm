section .data
    msg1 db 'Nhap chuoi: ',0x0
    lenMsg1 equ $-msg1
    msg2 db 'Chuoi sau khi dao nguoc: ',0x0
    lenMsg2 equ $-msg2
section .bss
    str1 resb 255
    str2 resb 255
    lenStr resb 1
section .text
    global _start
    _start:
        ;output the message "Nhap chuoi: "
        mov eax, msg1
        call print_string
        ;Enter string 
        mov eax,3
        mov ebx,0
        mov ecx,str1
        mov edx, 100
        int 80h
        ;lay do dai chuoi cua nhap
        mov eax,str1
        call string_len
        mov ecx,eax
        mov esi,0
        lap_push:
            mov eax, [str1+esi]
            push eax
            inc esi
            loop lap_push
        mov eax,str1
        call string_len
        mov ecx,eax
        mov esi,0
        lap_pop:
            pop	eax
            cmp eax,0ah
            je lap_pop
            mov	[str2+esi], al
            inc	esi
            loop lap_pop
        ;output the message "Chuoi sau khi dao nguoc:  "
        mov eax,msg2
        call print_string
        mov eax,str2
        call print_string
        exit:
            mov eax,1
            int 80h
        ;-----------------------------------------------
        
        ;lay do dai chuoi
        string_len:
            push ebx
            mov ebx,eax
        next_char:
            cmp byte [eax],0
            jz _endString
            inc eax
            jmp next_char
        _endString:
            sub eax,ebx
            pop ebx
            ret
        ;-----------------------------------------------
        ;in chuoi
        print_string:
            push edx
            push ecx
            push ebx
            push eax
            call string_len   ;eax <- len(string)
            mov edx, eax
            pop eax           ;eax <- string
            mov ecx, eax
            mov ebx,1
            mov eax,4
            int 80h

            pop ebx
            pop ecx
            pop edx
            ret
            
